<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel</title>
    <link rel="stylesheet" href="./css/main.css" />
  </head>
  <body>
    <div id="adminContent"></div>

    <!-- Main Layout Template -->
    <template id="adminLayoutTemplate">
      <div class="admin-container">
        <div class="sidebar">
          <div class="sidebar-header">
            <h2>üõ†Ô∏è Admin Panel</h2>
          </div>
          <nav class="sidebar-nav">
            <ul class="nav-menu">
              <li class="nav-item" data-tab="dashboard">
                <i class="icon">üìä</i>
                <span>T·ªïng quan</span>
              </li>
              <li class="nav-item" data-tab="categories">
                <i class="icon">üìÇ</i>
                <span>Danh m·ª•c</span>
                <span class="count" data-count="categories"></span>
              </li>
              <li class="nav-item" data-tab="products">
                <i class="icon">üì¶</i>
                <span>S·∫£n ph·∫©m</span>
                <span class="count" data-count="products"></span>
              </li>
              <li class="nav-item" data-tab="users">
                <i class="icon">üë•</i>
                <span>Ng∆∞·ªùi d√πng</span>
                <span class="count" data-count="users"></span>
              </li>
              <li class="nav-item" data-tab="reviews">
                <i class="icon">‚≠ê</i>
                <span>ƒê√°nh gi√°</span>
                <span class="count" data-count="reviews"></span>
              </li>
              <li class="nav-item" data-tab="policies">
                <i class="icon">üìú</i>
                <span>Ch√≠nh s√°ch</span>
                <span class="count" data-count="policies"></span>
              </li>
              <li class="nav-item">
                <i class="icon">üè†</i>
                <a href="./index.html" target="_blank" class="text-u-none text-white">Trang ch·ªß</a>
              </li>
            </ul>
          </nav>
        </div>
        <div class="main-content">
          <div class="content-header">
            <h1 id="pageTitle"></h1>
            <div class="header-actions">
              <button class="btn btn-primary add-new">+ Th√™m m·ªõi</button>
              <button class="btn btn-secondary export-data">üì§ Xu·∫•t d·ªØ li·ªáu</button>
            </div>
          </div>
          <div class="content-body" id="contentBody"></div>
        </div>
      </div>
    </template>

    <!-- Dashboard Template -->
    <template id="dashboardTemplate">
      <div class="dashboard-stats">
        <div class="stat-card">
          <div class="stat-icon">üì¶</div>
          <div class="stat-info">
            <h3 data-stat="products"></h3>
            <p>S·∫£n ph·∫©m</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üë•</div>
          <div class="stat-info">
            <h3 data-stat="users"></h3>
            <p>Ng∆∞·ªùi d√πng</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">‚≠ê</div>
          <div class="stat-info">
            <h3 data-stat="reviews"></h3>
            <p>ƒê√°nh gi√°</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üí∞</div>
          <div class="stat-info">
            <h3 data-stat="revenue"></h3>
            <p>T·ªïng gi√° tr·ªã</p>
          </div>
        </div>
      </div>
      <div class="recent-activities">
        <h3>Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h3>
        <div class="activity-list" id="activityList"></div>
      </div>
    </template>

    <!-- Activity Item Template -->
    <template id="activityItemTemplate">
      <div class="activity-item">
        <span class="activity-icon"></span>
        <span class="activity-text"></span>
        <span class="activity-time"></span>
      </div>
    </template>

    <!-- Categories Template -->
    <template id="categoriesTemplate">
      <div class="data-table-container">
        <div class="table-header">
          <h3>Danh s√°ch danh m·ª•c</h3>
          <input type="text" placeholder="üîç T√¨m ki·∫øm danh m·ª•c..." class="search-input" />
        </div>
        <div class="data-table">
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>T√™n danh m·ª•c</th>
                <th>S·ªë s·∫£n ph·∫©m</th>
                <th>Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="categoryList"></tbody>
          </table>
        </div>
      </div>
    </template>

    <!-- Category Row Template -->
    <template id="categoryRowTemplate">
      <tr>
        <td class="category-id"></td>
        <td class="category-name"></td>
        <td class="category-product-count"></td>
        <td>
          <button class="btn-action edit">‚úèÔ∏è</button>
          <button class="btn-action delete">üóëÔ∏è</button>
        </td>
      </tr>
    </template>

    <template id="productsTemplate">
      <div class="data-table-container">
        <div class="table-header">
          <h3>Danh s√°ch s·∫£n ph·∫©m</h3>
          <input type="text" placeholder="üîç T√¨m ki·∫øm s·∫£n ph·∫©m..." class="search-input" />
        </div>
        <div class="data-table">
          <table>
            <thead>
              <tr>
                <th>·∫¢nh</th>
                <th>T√™n s·∫£n ph·∫©m</th>
                <th>Gi√°</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="productList"></tbody>
          </table>
        </div>
      </div>
    </template>

    <!-- Product Row Template -->
    <template id="productRowTemplate">
      <tr>
        <td><img class="product-thumb" data-src="" alt="" /></td>
        <td class="product-name"></td>
        <td class="product-price"></td>
        <td><span class="status-badge active">Ho·∫°t ƒë·ªông</span></td>
        <td>
          <button class="btn-action edit">‚úèÔ∏è</button>
          <button class="btn-action delete">üóëÔ∏è</button>
        </td>
      </tr>
    </template>

    <!-- Product Form Template -->
    <template id="productFormTemplate">
      <div class="product-form-container">
        <h2 class="form-title"></h2>
        <form class="product-form">
          <div class="form-group">
            <label for="name">T√™n s·∫£n ph·∫©m *</label>
            <input type="text" id="name" name="name" required />
          </div>
          <div class="form-group">
            <label for="rating">ƒê√°nh gi√° <span style="color: #888">(Kh√¥ng th·ªÉ ch·ªânh s·ª≠a)</span></label>
            <input type="number" id="rating" name="rating" step="0.1" min="0" max="5" disabled />
          </div>
          <div class="form-group">
            <label for="ratingCount">S·ªë l∆∞·ª£t ƒë√°nh gi√° <span style="color: #888">(Kh√¥ng th·ªÉ ch·ªânh s·ª≠a)</span></label>
            <input type="number" id="ratingCount" name="ratingCount" disabled />
          </div>
          <div class="form-group">
            <label for="priceOriginal">Gi√° g·ªëc *</label>
            <input type="number" id="priceOriginal" name="priceOriginal" required />
          </div>
          <div class="form-group">
            <label for="priceSale">Gi√° khuy·∫øn m√£i</label>
            <input type="number" id="priceSale" name="priceSale" />
          </div>
          <div class="form-group">
            <label for="discount">Ph·∫ßn trƒÉm gi·∫£m gi√°</label>
            <input type="number" id="discount" name="discount" />
          </div>
          <div class="form-group">
            <label for="description">M√¥ t·∫£</label>
            <textarea id="description" name="description"></textarea>
          </div>
          <div class="form-group">
            <label for="brand">Th∆∞∆°ng hi·ªáu</label>
            <input type="text" id="brand" name="brand" />
          </div>
          <div class="form-group">
            <label for="colors">M√†u s·∫Øc (m·ªói m√†u m·ªôt d√≤ng)</label>
            <textarea id="colors" name="colors"></textarea>
          </div>
          <div class="form-group">
            <label for="size">K√≠ch th∆∞·ªõc</label>
            <input type="text" id="size" name="size" />
          </div>
          <div class="form-group">
            <label for="category">Danh m·ª•c *</label>
            <select id="category" name="category" required>
              <!-- ƒê∆∞·ª£c ƒëi·ªÅn ƒë·ªông b·ªüi JS -->
            </select>
          </div>
          <div class="form-group">
            <label for="stockStatus">T√¨nh tr·∫°ng kho</label>
            <select id="stockStatus" name="stockStatus">
              <option value="C√≤n h√†ng">C√≤n h√†ng</option>
              <option value="H·∫øt h√†ng">H·∫øt h√†ng</option>
            </select>
          </div>
          <div class="form-group">
            <label for="techInfo">Th√¥ng tin k·ªπ thu·∫≠t (JSON)</label>
            <textarea id="techInfo" name="techInfo" placeholder='[{"label": "Ch·∫•t li·ªáu", "value": "H·ª£p kim"}, ...]'></textarea>
          </div>
          <div class="form-group">
            <label>H√¨nh ·∫£nh ch√≠nh</label>
            <div id="mainImageContainer" class="image-container"></div>
          </div>
          <div class="form-group">
            <label>Video</label>
            <div id="videoContainer" class="video-container"></div>
          </div>
          <div class="form-group">
            <label>·∫¢nh thumbnail</label>
            <div id="thumbnailContainer" class="thumbnail-container"></div>
            <p style="color: #888">Click v√†o n√∫t 'Thay ·∫£nh' ho·∫∑c 'Thay video' ƒë·ªÉ upload file m·ªõi.</p>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-submit">L∆∞u</button>
            <button type="button" class="btn btn-cancel" onclick="this.closest('form').reset(); this.parentElement.parentElement.outerHTML = '<div id=\'contentBody\'></div>'; this.switchTab('products')">H·ªßy</button>
          </div>
        </form>
      </div>
      <script>
        document.addEventListener("DOMContentLoaded", () => {
          const categorySelect = document.getElementById("category");
          const categories = JSON.parse(localStorage.getItem("categories")) || [];
          categories.forEach((cat) => {
            const option = document.createElement("option");
            option.value = cat.name;
            option.textContent = cat.name;
            categorySelect.appendChild(option);
          });
        });
      </script>
    </template>

    <!-- Users Template -->
    <template id="usersTemplate">
      <div class="data-table-container">
        <div class="table-header">
          <h3>Danh s√°ch ng∆∞·ªùi d√πng</h3>
          <input type="text" placeholder="üîç T√¨m ki·∫øm ng∆∞·ªùi d√πng..." class="search-input" />
        </div>
        <div class="data-table">
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>H·ªç t√™n</th>
                <th>Email</th>
                <th>Ng√†y tham gia</th>
                <th>Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="userList"></tbody>
          </table>
        </div>
      </div>
    </template>

    <!-- User Row Template -->
    <template id="userRowTemplate">
      <tr>
        <td class="user-id"></td>
        <td class="user-fullname"></td>
        <td class="user-email"></td>
        <td class="user-createdAt"></td>
        <td>
          <button class="btn-action edit">‚úèÔ∏è</button>
          <button class="btn-action delete">üóëÔ∏è</button>
        </td>
      </tr>
    </template>

    <!-- Reviews Template -->
    <template id="reviewsTemplate">
      <div class="reviews-container">
        <div class="table-header">
          <h3>ƒê√°nh gi√° s·∫£n ph·∫©m</h3>
          <select class="filter-select">
            <option value="all">T·∫•t c·∫£ ƒë√°nh gi√°</option>
            <option value="5">5 sao</option>
            <option value="4">4 sao</option>
            <option value="3">3 sao</option>
            <option value="2">2 sao</option>
            <option value="1">1 sao</option>
          </select>
        </div>
        <div class="reviews-list" id="reviewList"></div>
      </div>
    </template>

    <!-- Review Card Template -->
    <template id="reviewCardTemplate">
      <div class="review-card">
        <div class="review-header">
          <strong class="review-author"></strong>
          <div class="rating-stars"></div>
        </div>
        <p class="review-comment"></p>
        <span class="review-status"></span>
        <div class="review-actions">
          <button class="btn-action approve" style="display: none">‚úÖ Duy·ªát</button>
          <button class="btn-action reject" style="display: none">‚ùå T·ª´ ch·ªëi</button>
        </div>
      </div>
    </template>

    <!-- Policies Template -->
    <template id="policiesTemplate">
      <div class="policies-container">
        <div class="table-header">
          <h3>Ch√≠nh s√°ch</h3>
        </div>
        <div class="policies-list" id="policyList"></div>
      </div>
    </template>

    <!-- Policy Card Template -->
    <template id="policyCardTemplate">
      <div class="policy-card">
        <div class="policy-header">
          <h4 class="policy-title"></h4>
          <div class="policy-actions">
            <button class="btn-action edit">‚úèÔ∏è</button>
            <button class="btn-action delete">üóëÔ∏è</button>
          </div>
        </div>
        <div class="policy-details"></div>
      </div>
    </template>

    <!-- Modal Template -->
    <template id="modalTemplate">
      <div class="modal">
        <div class="modal-content">
          <span class="modal-close">√ó</span>
          <h2 class="modal-title"></h2>
          <form class="modal-form">
            <!-- Form fields will be injected dynamically -->
          </form>
        </div>
      </div>
    </template>

    <script type="module" src="./js/admin.js"></script>
  </body>
</html>
